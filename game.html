<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Games Edukatif - StopBullying</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .navbar {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 20px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      width: 100%;
      z-index: 100;
    }

    .logo {
      font-size: 1.5rem;
      font-weight: bold;
      color: #e91e63;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .nav-links {
      display: flex;
      gap: 2rem;
      list-style: none;
    }

    .nav-links a {
      text-decoration: none;
      color: #333;
      font-weight: 500;
      transition: color 0.3s;
      padding: 0.5rem 1rem;
      border-radius: 25px;
    }

    .nav-links a:hover {
      color: #e91e63;
      background: rgba(233, 30, 99, 0.1);
    }

    .user-profile {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .profile-pic {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(45deg, #e91e63, #f8bbd9);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
    }

    .container {
      max-width: 700px;
      background: rgba(255,255,255,0.95);
      border-radius: 20px;
      padding: 2rem;
      margin: 2rem 1rem;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1);
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      font-size: 2.5rem;
      background: linear-gradient(45deg, #e91e63, #9c27b0);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 1rem;
      text-align: center;
    }

    .category-info {
      background: linear-gradient(45deg, #e3f2fd, #f3e5f5);
      padding: 1rem;
      border-radius: 10px;
      margin-bottom: 1.5rem;
      text-align: center;
      border-left: 4px solid #e91e63;
    }

    .category-title {
      font-weight: bold;
      color: #9c27b0;
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
    }

    .category-desc {
      color: #666;
      font-size: 0.9rem;
    }

    #wordDisplay {
      font-size: 2rem;
      letter-spacing: 10px;
      margin: 2rem 0;
      user-select: none;
      color: #9c27b0;
      font-weight: bold;
    }

    #message {
      margin: 1rem 0;
      font-weight: bold;
      font-size: 1.2rem;
      color: #e91e63;
      min-height: 1.5rem;
      text-align: center;
    }

    #hint {
      font-style: italic;
      color: #555;
      text-align: center;
      margin-top: 5px;
      background: #f8f9fa;
      padding: 0.8rem;
      border-radius: 8px;
      border-left: 3px solid #17a2b8;
    }

    .letters {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .letter-btn {
      background: linear-gradient(45deg, #e91e63, #9c27b0);
      border: none;
      color: white;
      font-weight: bold;
      width: 40px;
      height: 40px;
      border-radius: 8px;
      cursor: pointer;
      user-select: none;
      transition: all 0.3s;
    }

    .letter-btn:disabled {
      background: #ccc;
      cursor: default;
      transform: scale(0.9);
    }

    .letter-btn:hover:not(:disabled) {
      background: linear-gradient(45deg, #f48fb1, #ce93d8);
      transform: translateY(-2px);
    }

    .game-controls {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .btn {
      padding: 0.8rem 2rem;
      background: linear-gradient(45deg, #e91e63, #9c27b0);
      color: white;
      border: none;
      border-radius: 25px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(233, 30, 99, 0.4);
    }

    .btn-secondary {
      background: linear-gradient(45deg, #17a2b8, #20c997);
    }

    .btn-secondary:hover {
      box-shadow: 0 5px 15px rgba(23, 162, 184, 0.4);
    }

    .stats-container {
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-top: 1rem;
      gap: 1rem;
    }

    .stat-box {
      background: #f8f9fa;
      padding: 0.8rem;
      border-radius: 8px;
      text-align: center;
      flex: 1;
      border: 2px solid transparent;
      transition: all 0.3s;
    }

    .stat-box.highlight {
      border-color: #e91e63;
      background: #ffeef3;
    }

    .stat-label {
      font-size: 0.8rem;
      color: #666;
      margin-bottom: 0.3rem;
    }

    .stat-value {
      font-weight: bold;
      font-size: 1.1rem;
      color: #333;
    }

    .completion-message {
      background: linear-gradient(45deg, #d4edda, #c3e6cb);
      border: 1px solid #c3e6cb;
      border-radius: 10px;
      padding: 1rem;
      margin-top: 1rem;
      text-align: center;
      color: #155724;
    }

    .progress-indicator {
      width: 100%;
      height: 8px;
      background: #e9ecef;
      border-radius: 4px;
      margin: 1rem 0;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(45deg, #e91e63, #9c27b0);
      border-radius: 4px;
      transition: width 0.5s ease;
    }

    @media (max-width: 480px) {
      #wordDisplay {
        font-size: 1.5rem;
        letter-spacing: 6px;
      }

      .letter-btn {
        width: 30px;
        height: 30px;
        font-size: 0.9rem;
      }

      .stats-container {
        flex-direction: column;
      }

      .game-controls {
        flex-direction: column;
        width: 100%;
      }

      .btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="logo">üõ°Ô∏è StopBullying</div>
    <ul class="nav-links">
      <li><a href="index.html">Beranda</a></li>
      <li><a href="materi.html">Materi</a></li>
      <li><a href="game.html">Game</a></li>
      <li><a href="bantuan.html">Bantuan</a></li>
    </ul>

    <div class="user-profile">
  <span id="user-greeting">Halo,!</span>
  <div class="profile-container" style="position: relative; display: inline-block;">
    <div class="profile-pic" id="profile-pic" style="width: 40px; height: 40px; border-radius: 50%; background: #fe2bad; display: flex; align-items: center; justify-content: center; cursor: pointer;">
      <!-- Inisial user akan dimasukkan oleh JS -->
    </div>
    <div class="dropdown" id="profileMenu" style="display: none; position: absolute; top: 50px; right: 0; background: white; border: 1px solid #ccc; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); z-index: 1000;">
      <a href="profile.html" style="display: block; padding: 10px 15px; text-decoration: none; color: #333;">Lihat Profil</a>
      <a href="logout.html" style="display: block; padding: 10px 15px; text-decoration: none; color: #333;">Logout</a>
    </div>
  </div>
</div>
</nav>

  <div class="container">
    <h1>üéÆ Tebak Kata Anti-Bullying</h1>
    <p>Isi huruf yang hilang untuk menyelesaikan kata. Yuk, belajar sambil bermain berdasarkan materi anti-bullying!</p>
    
    <div class="category-info" id="categoryInfo">
      <div class="category-title" id="categoryTitle">Memuat...</div>
      <div class="category-desc" id="categoryDesc">Persiapkan diri untuk belajar!</div>
    </div>

    <div class="progress-indicator">
      <div class="progress-fill" id="progressFill" style="width: 0%"></div>
    </div>

    <div id="hint"></div>
    <div id="wordDisplay">_ _ _ _ _ _</div>
    <div id="message"></div>
    
    <div class="letters" id="lettersContainer"></div>
    
    <div class="stats-container">
      <div class="stat-box">
        <div class="stat-label">Skor</div>
        <div class="stat-value" id="scoreValue">0</div>
      </div>
      <div class="stat-box" id="triesBox">
        <div class="stat-label">Kesempatan</div>
        <div class="stat-value" id="triesValue">6</div>
      </div>
      <div class="stat-box">
        <div class="stat-label">Level</div>
        <div class="stat-value" id="levelValue">1</div>
      </div>
    </div>

    <div class="game-controls">
      <button class="btn" id="resetBtn">Main Lagi</button>
      <button class="btn btn-secondary" id="nextCategoryBtn">Ganti Kategori</button>
    </div>

    <div id="completionMessage" class="completion-message" style="display: none;">
      <h3>üéâ Selamat!</h3>
      <p>Kamu telah menyelesaikan kata dari materi anti-bullying. Terus belajar untuk menjadi agen perubahan!</p>
    </div>
  </div>

<script>
  // Data kata berdasarkan 6 materi anti-bullying
  const materiCategories = [
    {
      name: "Apa itu Bullying?",
      description: "Pemahaman Dasar tentang Bullying",
      icon: "üìñ",
      words: [
        { word: "BULLYING", hint: "Perilaku agresif yang berulang terhadap orang yang lebih lemah" },
        { word: "AGRESIF", hint: "Sifat menyerang atau bersikap kasar" },
        { word: "BERULANG", hint: "Terjadi secara terus-menerus, bukan hanya sekali" },
        { word: "DISENGAJA", hint: "Dilakukan dengan sengaja untuk menyakiti" },
        { word: "LEMAH", hint: "Kondisi korban yang dianggap tidak berdaya" },
        { word: "KONFLIK", hint: "Pertentangan yang berbeda dengan bullying" },
        { word: "KORBAN", hint: "Orang yang menjadi sasaran bullying" },
        { word: "PELAKU", hint: "Orang yang melakukan tindakan bullying" }
      ]
    },
    {
      name: "Jenis-jenis Bullying",
      description: "Fisik, Verbal, dan Cyber",
      icon: "üë•",
      words: [
        { word: "FISIK", hint: "Jenis bullying yang melibatkan kontak tubuh" },
        { word: "VERBAL", hint: "Bullying menggunakan kata-kata menyakitkan" },
        { word: "RELASIONAL", hint: "Bullying yang merusak hubungan sosial" },
        { word: "CYBER", hint: "Bullying yang terjadi di dunia digital" },
        { word: "MEMUKUL", hint: "Contoh bullying fisik dengan tangan" },
        { word: "MENGEJEK", hint: "Contoh bullying verbal yang merendahkan" },
        { word: "MENGUCILKAN", hint: "Tindakan mengeluarkan dari kelompok" },
        { word: "ONLINE", hint: "Platform tempat cyberbullying terjadi" }
      ]
    },
    {
      name: "Dampak Bullying",
      description: "Efek Psikologis dan Sosial",
      icon: "üíî",
      words: [
        { word: "TRAUMA", hint: "Luka batin akibat pengalaman menyakitkan" },
        { word: "DEPRESI", hint: "Gangguan mental berupa kesedihan mendalam" },
        { word: "CEMAS", hint: "Perasaan khawatir dan takut berlebihan" },
        { word: "ISOLASI", hint: "Keadaan terpisah dari lingkungan sosial" },
        { word: "AKADEMIK", hint: "Bidang yang terpengaruh akibat bullying di sekolah" },
        { word: "PERCAYA", hint: "Rasa yakin pada diri sendiri yang menurun" },
        { word: "TIDUR", hint: "Aktivitas yang terganggu akibat stress" },
        { word: "NAFSU", hint: "Keinginan makan yang berubah karena stress" }
      ]
    },
    {
      name: "Cara Menghadapi Bullying",
      description: "Strategi Perlindungan Diri",
      icon: "üõ°Ô∏è",
      words: [
        { word: "TEGAS", hint: "Sikap yang perlu ditunjukkan saat menghadapi bullying" },
        { word: "LAPOR", hint: "Tindakan memberitahu pihak berwenang" },
        { word: "HINDARI", hint: "Cara menjauh dari situasi berbahaya" },
        { word: "DUKUNGAN", hint: "Bantuan dari orang lain yang diperlukan korban" },
        { word: "GURU", hint: "Pihak di sekolah yang bisa dimintai bantuan" },
        { word: "ORANGTUA", hint: "Keluarga yang harus diberitahu tentang bullying" },
        { word: "AMAN", hint: "Kondisi yang harus diciptakan untuk korban" },
        { word: "MELAWAN", hint: "Yang TIDAK boleh dilakukan dengan kekerasan" }
      ]
    },
    {
      name: "Menjadi Bystander Positif",
      description: "Membantu Korban Bullying",
      icon: "ü§ù",
      words: [
        { word: "BYSTANDER", hint: "Orang yang menyaksikan bullying terjadi" },
        { word: "POSITIF", hint: "Jenis bystander yang membantu korban" },
        { word: "MEMBANTU", hint: "Tindakan yang dilakukan bystander positif" },
        { word: "MELINDUNGI", hint: "Upaya menjaga korban dari bahaya" },
        { word: "INKLUSIF", hint: "Sifat lingkungan yang menerima semua orang" },
        { word: "SEMANGAT", hint: "Yang diberikan kepada korban bullying" },
        { word: "MENDENGAR", hint: "Cara memberikan dukungan kepada korban" },
        { word: "PERUBAHAN", hint: "Yang bisa diciptakan oleh bystander positif" }
      ]
    },
    {
      name: "Cyberbullying",
      description: "Bullying di Era Digital",
      icon: "üíª",
      words: [
        { word: "DIGITAL", hint: "Era teknologi tempat cyberbullying terjadi" },
        { word: "MEDSOS", hint: "Platform utama tempat cyberbullying" },
        { word: "PRIVASI", hint: "Hak yang harus dijaga di dunia maya" },
        { word: "BLOKIR", hint: "Tindakan untuk menghentikan pelaku cyber" },
        { word: "BUKTI", hint: "Yang harus disimpan saat mengalami cyberbullying" },
        { word: "AKUN", hint: "Yang dibuat palsu untuk cyberbullying" },
        { word: "FOTO", hint: "Yang disebarkan tanpa izin dalam cyberbullying" },
        { word: "PLATFORM", hint: "Tempat melaporkan cyberbullying" }
      ]
    }
  ];

  let currentCategoryIndex = 0;
  let currentWordIndex = 0;
  let selectedWord = "";
  let guessedLetters = [];
  let remainingTries = 6;
  let score = 0;
  let level = 1;
  let completedWords = 0;

  const wordDisplay = document.getElementById("wordDisplay");
  const message = document.getElementById("message");
  const hintDisplay = document.getElementById("hint");
  const lettersContainer = document.getElementById("lettersContainer");
  const triesValue = document.getElementById("triesValue");
  const scoreValue = document.getElementById("scoreValue");
  const levelValue = document.getElementById("levelValue");
  const triesBox = document.getElementById("triesBox");
  const resetBtn = document.getElementById("resetBtn");
  const nextCategoryBtn = document.getElementById("nextCategoryBtn");
  const categoryTitle = document.getElementById("categoryTitle");
  const categoryDesc = document.getElementById("categoryDesc");
  const progressFill = document.getElementById("progressFill");
  const completionMessage = document.getElementById("completionMessage");

  function updateCategoryInfo() {
    const category = materiCategories[currentCategoryIndex];
    categoryTitle.textContent = `${category.icon} ${category.name}`;
    categoryDesc.textContent = category.description;
  }

  function updateProgress() {
    const category = materiCategories[currentCategoryIndex];
    const progress = ((currentWordIndex + 1) / category.words.length) * 100;
    progressFill.style.width = `${progress}%`;
  }

  function initGame() {
    const category = materiCategories[currentCategoryIndex];
    const wordData = category.words[currentWordIndex];
    
    selectedWord = wordData.word;
    guessedLetters = [];
    remainingTries = 6;
    message.textContent = "";
    triesValue.textContent = remainingTries;
    triesBox.classList.remove("highlight");
    hintDisplay.textContent = "üí° Petunjuk: " + wordData.hint;
    
    completionMessage.style.display = "none";

    // Berikan 1-2 huruf sebagai bantuan awal
    const hintCount = Math.min(2, Math.floor(selectedWord.length / 3));
    const hintIndices = new Set();
    while (hintIndices.size < hintCount) {
      hintIndices.add(Math.floor(Math.random() * selectedWord.length));
    }
    guessedLetters = [...hintIndices].map(i => selectedWord[i]);

    updateWordDisplay();
    updateStats();
    updateCategoryInfo();
    updateProgress();
    createLetterButtons();
  }

  function updateWordDisplay() {
    const display = selectedWord.split('').map(l =>
      guessedLetters.includes(l) ? l : "_"
    ).join(" ");
    wordDisplay.textContent = display;
  }

  function updateStats() {
    scoreValue.textContent = score;
    levelValue.textContent = level;
  }

  function createLetterButtons() {
    lettersContainer.innerHTML = "";

    for (let i = 65; i <= 90; i++) {
      const letter = String.fromCharCode(i);
      const btn = document.createElement("button");
      btn.textContent = letter;
      btn.classList.add("letter-btn");

      if (guessedLetters.includes(letter)) {
        btn.disabled = true;
      }

      btn.addEventListener("click", () => handleGuess(letter));
      lettersContainer.appendChild(btn);
    }
  }

  function handleGuess(letter) {
    if (guessedLetters.includes(letter) || remainingTries === 0) return;

    guessedLetters.push(letter);

    if (!selectedWord.includes(letter)) {
      remainingTries--;
      triesValue.textContent = remainingTries;
      message.textContent = "‚ùå Huruf tidak ada!";
      message.style.color = "#dc3545";
      
      if (remainingTries <= 2) {
        triesBox.classList.add("highlight");
      }
    } else {
      message.textContent = "‚úÖ Benar!";
      message.style.color = "#28a745";
      score += 10;
      updateStats();
    }

    updateWordDisplay();
    updateButtons();
    checkGameStatus();
  }

  function updateButtons() {
    const buttons = lettersContainer.querySelectorAll("button");
    buttons.forEach(btn => {
      if (guessedLetters.includes(btn.textContent)) {
        btn.disabled = true;
      }
    });
  }

  function checkGameStatus() {
    const currentDisplay = wordDisplay.textContent.replace(/\s/g, "");
    if (currentDisplay === selectedWord) {
      message.textContent = "üéâ Selamat! Kamu berhasil!";
      message.style.color = "#28a745";
      score += remainingTries * 5; // Bonus untuk sisa kesempatan
      completedWords++;
      
      if (completedWords % 3 === 0) {
        level++;
      }
      
      updateStats();
      disableAllButtons();
      
      // Pindah ke kata berikutnya setelah 2 detik
      setTimeout(() => {
        nextWord();
      }, 2000);
      
    } else if (remainingTries === 0) {
      message.textContent = `üòû Kata yang benar: ${selectedWord}`;
      message.style.color = "#dc3545";
      disableAllButtons();
      revealWord();
      
      // Pindah ke kata berikutnya setelah 3 detik
      setTimeout(() => {
        nextWord();
      }, 3000);
    }
  }

  function nextWord() {
    const category = materiCategories[currentCategoryIndex];
    
    if (currentWordIndex < category.words.length - 1) {
      currentWordIndex++;
      initGame();
    } else {
      // Selesai satu kategori
      completionMessage.style.display = "block";
      setTimeout(() => {
        nextCategory();
      }, 3000);
    }
  }

  function nextCategory() {
    currentCategoryIndex = (currentCategoryIndex + 1) % materiCategories.length;
    currentWordIndex = 0;
    initGame();
  }

  function disableAllButtons() {
    const buttons = lettersContainer.querySelectorAll("button");
    buttons.forEach(btn => btn.disabled = true);
  }

  function revealWord() {
    wordDisplay.textContent = selectedWord.split('').join(" ");
  }

  // Event listeners
  resetBtn.addEventListener("click", () => {
    currentWordIndex = 0;
    initGame();
  });

  nextCategoryBtn.addEventListener("click", () => {
    nextCategory();
  });

  // Inisialisasi user profile (simulasi)
  const users = ['Ahmad', 'Siti', 'Budi', 'Rina', 'Doni', 'Maya'];
  const randomUser = users[Math.floor(Math.random() * users.length)];
  document.getElementById('user-greeting').textContent = `Halo, ${randomUser}!`;
  document.getElementById('profile-pic').textContent = randomUser.charAt(0).toUpperCase();

  // Mulai game
  initGame();

  // Ambil username yang login dari localStorage
  const loggedInUser = localStorage.getItem('loggedInUser');

  if (loggedInUser) {
    // Update greeting
    const greetingSpan = document.getElementById('user-greeting');
    if (greetingSpan) {
      greetingSpan.textContent = `Halo, ${loggedInUser}!`;
    }

    // Update profile pic inisial (ambil huruf pertama)
    const profilePic = document.getElementById('profile-pic');
    if (profilePic) {
      profilePic.textContent = loggedInUser.charAt(0).toUpperCase();
     // Tambahkan klik event ke profile
      profilePic.style.cursor = 'pointer';
      profilePic.addEventListener('click', function () {
        // Arahkan ke halaman profil (ubah sesuai kebutuhan)
        window.location.href = 'profile.html';
      });
    }
  } else {
    // Kalau belum login, redirect ke login page
    window.location.href = 'login.html';
  }

</script>

</body>
</html>